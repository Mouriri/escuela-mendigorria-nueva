// ========================================
// TRANSLATIONS
// ========================================
const translations = {
    es: {
        'site.name': 'Colegio El Saber',
        'nav.home': 'Inicio',
        'nav.about': 'Quiénes somos',
        'nav.school': 'Escuela',
        'nav.activities': 'Actividades',
        'nav.private': 'Zona privada',
        'home.hero.title': 'Bienvenidos a nuestro colegio',
        'home.hero.subtitle': 'Educación Infantil y Primaria de calidad para el futuro de tus hijos',
        'home.hero.btn1': 'Conócenos',
        'home.hero.btn2': 'Contacto',
        'home.features.title': '¿Por qué elegirnos?',
        'home.features.card1.title': 'Profesores cualificados',
        'home.features.card1.desc': 'Equipo docente con amplia experiencia y formación continua',
        'home.features.card2.title': 'Metodología innovadora',
        'home.features.card2.desc': 'Aprendizaje activo y participativo adaptado a cada alumno',
        'home.features.card3.title': 'Instalaciones modernas',
        'home.features.card3.desc': 'Espacios amplios, seguros y equipados con tecnología',
        'home.features.card4.title': 'Educación multilingüe',
        'home.features.card4.desc': 'Formación en varios idiomas desde edades tempranas',
        'home.info.title': 'Educación de calidad desde los 3 años',
        'home.info.p1': 'Nuestro colegio ofrece una educación integral que abarca el 2º ciclo de Educación Infantil (3-6 años) y Educación Primaria (6-12 años).',
        'home.info.p2': 'Nos enfocamos en el desarrollo personal, social y académico de cada alumno, fomentando valores como el respeto, la responsabilidad y la creatividad.',
        'home.info.list1': '✓ Atención personalizada',
        'home.info.list2': '✓ Actividades extraescolares variadas',
        'home.info.list3': '✓ Comedor escolar saludable',
        'home.info.list4': '✓ Comunicación constante con las familias',
        'home.contact.title': 'Contáctanos',
        'home.contact.subtitle': 'Estamos aquí para resolver todas tus dudas',
        'home.contact.address.title': 'Dirección',
        'home.contact.phone.title': 'Teléfono',
        'home.contact.email.title': 'Email',
        'home.contact.hours.title': 'Horario',
        'home.contact.hours.desc': 'Lunes a Viernes: 9:00 - 17:00',
        'form.name': 'Nombre',
        'form.email': 'Email',
        'form.phone': 'Teléfono',
        'form.message': 'Mensaje',
        'form.submit': 'Enviar mensaje',
        'footer.desc': 'Educación de calidad para el futuro de tus hijos',
        'footer.links.title': 'Enlaces rápidos',
        'footer.contact.title': 'Contacto',
        'footer.rights': 'Todos los derechos reservados',
        'private.title': 'Zona Privada',
        'private.subtitle': 'Selecciona tu tipo de acceso',
        'private.student.title': 'Acceso Alumnos',
        'private.student.desc': 'Consulta tus notas y calificaciones',
        'private.student.btn': 'Iniciar sesión con Gmail',
        'private.teacher.title': 'Acceso Profesores',
        'private.teacher.desc': 'Gestiona las notas de tus alumnos',
        'private.teacher.btn': 'Acceder',
        'private.logout': 'Cerrar sesión',
        'private.student.dashboard.title': 'Panel del Alumno',
        'private.student.grades.title': 'Mis Calificaciones',
        'private.student.trimester1': '1º Trimestre',
        'private.student.trimester2': '2º Trimestre',
        'private.student.trimester3': '3º Trimestre',
        'private.student.table.subject': 'Asignatura',
        'private.student.table.grade': 'Nota',
        'private.student.table.comments': 'Observaciones',
        'private.subjects.math': 'Matemáticas',
        'private.subjects.language': 'Lengua Castellana',
        'private.subjects.english': 'Inglés',
        'private.subjects.science': 'Ciencias Naturales',
        'private.subjects.social': 'Ciencias Sociales',
        'private.subjects.art': 'Educación Artística',
        'private.subjects.pe': 'Educación Física',
        'private.subjects.music': 'Música',
        'private.comments.excellent': 'Excelente trabajo y participación',
        'private.comments.good': 'Buen nivel de comprensión lectora',
        'private.comments.progress': 'Gran progreso en expresión oral',
        'private.comments.interest': 'Muestra gran interés por la materia',
        'private.comments.improve': 'Puede mejorar en los trabajos',
        'private.comments.creative': 'Muy creativa y participativa',
        'private.comments.teamwork': 'Buen trabajo en equipo',
        'private.comments.talent': 'Demuestra talento musical',
        'private.student.average': 'Nota Media',
        'private.student.subjects': 'Asignaturas',
        'private.student.status': 'Estado',
        'private.student.approved': 'Aprobado',
        'private.teacher.dashboard.title': 'Panel del Profesor',
        'private.teacher.grades.title': 'Gestión de Calificaciones',
        'private.teacher.course': 'Curso',
        'private.teacher.trimester': 'Trimestre',
        'private.teacher.table.student': 'Alumno',
        'private.teacher.table.actions': 'Acciones',
        'private.teacher.save': 'Guardar',
        'private.teacher.saveall': 'Guardar Todas las Notas',
        'private.teacher.export': 'Exportar a PDF'
    },
    eus: {
        'site.name': 'El Saber Ikastetxea',
        'nav.home': 'Hasiera',
        'nav.about': 'Nor gara',
        'nav.school': 'Eskola',
        'nav.activities': 'Jarduerak',
        'nav.private': 'Eremu pribatua',
        'home.hero.title': 'Ongi etorri gure ikastetxera',
        'home.hero.subtitle': 'Haur eta Lehen Hezkuntzako kalitate hezkuntza zure seme-alaben etorkizunerako',
        'home.hero.btn1': 'Ezagutu gaitzazu',
        'home.hero.btn2': 'Kontaktua',
        'home.features.title': 'Zergatik aukeratu gu?',
        'home.features.card1.title': 'Irakasle kualifikatuak',
        'home.features.card1.desc': 'Esperientzia handiko eta etengabeko prestakuntzako irakasle taldea',
        'home.features.card2.title': 'Metodologia berritzailea',
        'home.features.card2.desc': 'Ikasle bakoitzari egokitutako ikaskuntza aktiboa eta parte-hartzailea',
        'home.features.card3.title': 'Instalazio modernoak',
        'home.features.card3.desc': 'Espazio zabalak, seguruak eta teknologiaz hornituta',
        'home.features.card4.title': 'Hezkuntza eleanitza',
        'home.features.card4.desc': 'Hainbat hizkuntzatan prestakuntza adin goiztiarretatik',
        'home.info.title': 'Kalitate hezkuntza 3 urtetik',
        'home.info.p1': 'Gure ikastetxeak Haur Hezkuntzako 2. zikloa (3-6 urte) eta Lehen Hezkuntza (6-12 urte) hartzen duen hezkuntza integrala eskaintzen du.',
        'home.info.p2': 'Ikasle bakoitzaren garapen pertsonala, soziala eta akademikoan zentratzen gara, errespetua, erantzukizuna eta sormena bezalako balioak sustatuz.',
        'home.info.list1': '✓ Arreta pertsonalizatua',
        'home.info.list2': '✓ Eskolaz kanpoko jarduera anitzak',
        'home.info.list3': '✓ Jantoki osasungarria',
        'home.info.list4': '✓ Familiarekin komunikazio etengabea',
        'home.contact.title': 'Jarri gurekin harremanetan',
        'home.contact.subtitle': 'Hemen gaude zure zalantzak argitzeko',
        'home.contact.address.title': 'Helbidea',
        'home.contact.phone.title': 'Telefonoa',
        'home.contact.email.title': 'Emaila',
        'home.contact.hours.title': 'Ordutegia',
        'home.contact.hours.desc': 'Astelehenetik ostiralera: 9:00 - 17:00',
        'form.name': 'Izena',
        'form.email': 'Emaila',
        'form.phone': 'Telefonoa',
        'form.message': 'Mezua',
        'form.submit': 'Mezua bidali',
        'footer.desc': 'Kalitate hezkuntza zure seme-alaben etorkizunerako',
        'footer.links.title': 'Esteka azkarrak',
        'footer.contact.title': 'Kontaktua',
        'footer.rights': 'Eskubide guztiak erreserbatuak',
        'private.title': 'Eremu Pribatua',
        'private.subtitle': 'Hautatu zure sarrera mota',
        'private.student.title': 'Ikasleen Sarbidea',
        'private.student.desc': 'Kontsultatu zure notak eta kalifikazioak',
        'private.student.btn': 'Hasi saioa Gmail-ekin',
        'private.teacher.title': 'Irakasleen Sarbidea',
        'private.teacher.desc': 'Kudeatu zure ikasleen notak',
        'private.teacher.btn': 'Sartu',
        'private.logout': 'Saioa itxi',
        'private.student.dashboard.title': 'Ikaslearen Panela',
        'private.student.grades.title': 'Nire Kalifikazioak',
        'private.student.trimester1': '1. Hiruhilekoa',
        'private.student.trimester2': '2. Hiruhilekoa',
        'private.student.trimester3': '3. Hiruhilekoa',
        'private.student.table.subject': 'Irakasgaia',
        'private.student.table.grade': 'Nota',
        'private.student.table.comments': 'Oharrak',
        'private.subjects.math': 'Matematika',
        'private.subjects.language': 'Gaztelania Hizkuntza',
        'private.subjects.english': 'Ingelesa',
        'private.subjects.science': 'Natur Zientziak',
        'private.subjects.social': 'Gizarte Zientziak',
        'private.subjects.art': 'Arte Hezkuntza',
        'private.subjects.pe': 'Gorputz Hezkuntza',
        'private.subjects.music': 'Musika',
        'private.student.average': 'Batez besteko nota',
        'private.student.subjects': 'Irakasgaiak',
        'private.student.status': 'Egoera',
        'private.student.approved': 'Onartuta',
        'private.teacher.dashboard.title': 'Irakaslearen Panela',
        'private.teacher.grades.title': 'Kalifikazioen Kudeaketa',
        'private.teacher.course': 'Kurtsoa',
        'private.teacher.trimester': 'Hiruhilekoa',
        'private.teacher.table.student': 'Ikaslea',
        'private.teacher.table.actions': 'Ekintzak',
        'private.teacher.save': 'Gorde',
        'private.teacher.saveall': 'Gorde Nota Guztiak',
        'private.teacher.export': 'Esportatu PDF-ra'
    },
    ar: {
        'site.name': 'مدرسة المعرفة',
        'nav.home': 'الرئيسية',
        'nav.about': 'من نحن',
        'nav.school': 'المدرسة',
        'nav.activities': 'الأنشطة',
        'nav.private': 'المنطقة الخاصة',
        'home.hero.title': 'مرحباً بكم في مدرستنا',
        'home.hero.subtitle': 'تعليم عالي الجودة لمرحلة الطفولة والابتدائية لمستقبل أطفالكم',
        'home.hero.btn1': 'تعرف علينا',
        'home.hero.btn2': 'اتصل بنا',
        'home.features.title': 'لماذا تختارنا؟',
        'home.features.card1.title': 'معلمون مؤهلون',
        'home.features.card1.desc': 'فريق تدريس ذو خبرة واسعة وتدريب مستمر',
        'home.features.card2.title': 'منهجية مبتكرة',
        'home.features.card2.desc': 'تعلم نشط وتشاركي مكيف لكل طالب',
        'home.features.card3.title': 'مرافق حديثة',
        'home.features.card3.desc': 'مساحات واسعة وآمنة ومجهزة بالتكنولوجيا',
        'home.features.card4.title': 'تعليم متعدد اللغات',
        'home.features.card4.desc': 'تدريب بعدة لغات منذ سن مبكرة',
        'home.info.title': 'تعليم عالي الجودة من سن 3 سنوات',
        'home.info.p1': 'تقدم مدرستنا تعليماً شاملاً يغطي المرحلة الثانية من تعليم الطفولة (3-6 سنوات) والتعليم الابتدائي (6-12 سنة).',
        'home.info.p2': 'نركز على التطور الشخصي والاجتماعي والأكاديمي لكل طالب، مع تعزيز قيم مثل الاحترام والمسؤولية والإبداع.',
        'home.info.list1': '✓ اهتمام شخصي',
        'home.info.list2': '✓ أنشطة لا منهجية متنوعة',
        'home.info.list3': '✓ مقصف مدرسي صحي',
        'home.info.list4': '✓ تواصل مستمر مع العائلات',
        'home.contact.title': 'اتصل بنا',
        'home.contact.subtitle': 'نحن هنا لحل جميع استفساراتك',
        'home.contact.address.title': 'العنوان',
        'home.contact.phone.title': 'الهاتف',
        'home.contact.email.title': 'البريد الإلكتروني',
        'home.contact.hours.title': 'ساعات العمل',
        'home.contact.hours.desc': 'من الاثنين إلى الجمعة: 9:00 - 17:00',
        'form.name': 'الاسم',
        'form.email': 'البريد الإلكتروني',
        'form.phone': 'الهاتف',
        'form.message': 'الرسالة',
        'form.submit': 'إرسال الرسالة',
        'footer.desc': 'تعليم عالي الجودة لمستقبل أطفالكم',
        'footer.links.title': 'روابط سريعة',
        'footer.contact.title': 'اتصل بنا',
        'footer.rights': 'جميع الحقوق محفوظة',
        'private.title': 'المنطقة الخاصة',
        'private.subtitle': 'اختر نوع الوصول الخاص بك',
        'private.student.title': 'دخول الطلاب',
        'private.student.desc': 'استشر درجاتك وتقييماتك',
        'private.student.btn': 'تسجيل الدخول باستخدام Gmail',
        'private.teacher.title': 'دخول المعلمين',
        'private.teacher.desc': 'إدارة درجات طلابك',
        'private.teacher.btn': 'الدخول',
        'private.logout': 'تسجيل الخروج',
        'private.student.dashboard.title': 'لوحة الطالب',
        'private.student.grades.title': 'تقييماتي',
        'private.student.trimester1': 'الفصل الأول',
        'private.student.trimester2': 'الفصل الثاني',
        'private.student.trimester3': 'الفصل الثالث',
        'private.student.table.subject': 'المادة',
        'private.student.table.grade': 'الدرجة',
        'private.student.table.comments': 'الملاحظات',
        'private.subjects.math': 'الرياضيات',
        'private.subjects.language': 'اللغة الإسبانية',
        'private.subjects.english': 'الإنجليزية',
        'private.subjects.science': 'العلوم الطبيعية',
        'private.subjects.social': 'العلوم الاجتماعية',
        'private.subjects.art': 'التربية الفنية',
        'private.subjects.pe': 'التربية البدنية',
        'private.subjects.music': 'الموسيقى',
        'private.student.average': 'المعدل',
        'private.student.subjects': 'المواد',
        'private.student.status': 'الحالة',
        'private.student.approved': 'ناجح',
        'private.teacher.dashboard.title': 'لوحة المعلم',
        'private.teacher.grades.title': 'إدارة التقييمات',
        'private.teacher.course': 'الصف',
        'private.teacher.trimester': 'الفصل',
        'private.teacher.table.student': 'الطالب',
        'private.teacher.table.actions': 'الإجراءات',
        'private.teacher.save': 'حفظ',
        'private.teacher.saveall': 'حفظ جميع الدرجات',
        'private.teacher.export': 'تصدير إلى PDF'
    }
};

// ========================================
// LANGUAGE MANAGEMENT
// ========================================
let currentLang = localStorage.getItem('language') || 'es';

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('language', lang);

    // Update active button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
    });

    // Update RTL for Arabic
    if (lang === 'ar') {
        document.body.setAttribute('dir', 'rtl');
    } else {
        document.body.removeAttribute('dir');
    }

    // Update all translatable elements
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
}

// ========================================
// HAMBURGER MENU
// ========================================
function initHamburgerMenu() {
    const hamburger = document.getElementById('hamburger');
    const nav = document.getElementById('mainNav');

    if (hamburger && nav) {
        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            nav.classList.toggle('active');
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!hamburger.contains(e.target) && !nav.contains(e.target)) {
                hamburger.classList.remove('active');
                nav.classList.remove('active');
            }
        });
    }
}

// ========================================
// CONTACT FORM
// ========================================
function initContactForm() {
    const form = document.getElementById('contactForm');
    if (form) {
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            alert(currentLang === 'es' ? '¡Mensaje enviado con éxito!' :
                currentLang === 'eus' ? 'Mezua ondo bidali da!' :
                    'تم إرسال الرسالة بنجاح!');
            form.reset();
        });
    }
}

// ========================================
// PRIVATE ZONE
// ========================================
function initPrivateZone() {
    const studentLoginBtn = document.getElementById('studentLoginBtn');
    const teacherLoginBtn = document.getElementById('teacherLoginBtn');
    const studentLogoutBtn = document.getElementById('studentLogoutBtn');
    const teacherLogoutBtn = document.getElementById('teacherLogoutBtn');

    const loginSelection = document.getElementById('loginSelection');
    const studentDashboard = document.getElementById('studentDashboard');
    const teacherDashboard = document.getElementById('teacherDashboard');

    if (studentLoginBtn) {
        studentLoginBtn.addEventListener('click', () => {
            loginSelection.style.display = 'none';
            studentDashboard.style.display = 'block';
        });
    }

    if (teacherLoginBtn) {
        teacherLoginBtn.addEventListener('click', () => {
            loginSelection.style.display = 'none';
            teacherDashboard.style.display = 'block';
        });
    }

    if (studentLogoutBtn) {
        studentLogoutBtn.addEventListener('click', () => {
            studentDashboard.style.display = 'none';
            loginSelection.style.display = 'block';
        });
    }

    if (teacherLogoutBtn) {
        teacherLogoutBtn.addEventListener('click', () => {
            teacherDashboard.style.display = 'none';
            loginSelection.style.display = 'block';
        });
    }

    // Teacher actions
    const saveAllBtn = document.getElementById('saveAllGrades');
    const exportBtn = document.getElementById('exportGrades');

    if (saveAllBtn) {
        saveAllBtn.addEventListener('click', () => {
            alert(currentLang === 'es' ? '¡Notas guardadas correctamente!' :
                currentLang === 'eus' ? 'Notak ondo gorde dira!' :
                    'تم حفظ الدرجات بنجاح!');
        });
    }

    if (exportBtn) {
        exportBtn.addEventListener('click', () => {
            alert(currentLang === 'es' ? 'Exportando a PDF...' :
                currentLang === 'eus' ? 'PDF-ra esportatzen...' :
                    'جاري التصدير إلى PDF...');
        });
    }

    // Individual save buttons
    document.querySelectorAll('.btn-save').forEach(btn => {
        btn.addEventListener('click', () => {
            alert(currentLang === 'es' ? 'Nota guardada' :
                currentLang === 'eus' ? 'Nota gordeta' :
                    'تم حفظ الدرجة');
        });
    });
}

// ========================================
// INITIALIZATION
// ========================================
document.addEventListener('DOMContentLoaded', () => {
    // Set initial language
    setLanguage(currentLang);

    // Language selector
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            setLanguage(btn.dataset.lang);
        });
    });

    // Initialize features
    initHamburgerMenu();
    initContactForm();
    initPrivateZone();
});
